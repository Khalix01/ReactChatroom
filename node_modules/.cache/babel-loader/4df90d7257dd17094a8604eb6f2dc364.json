{"ast":null,"code":"import _toConsumableArray from\"/home/khalix/Documents/ReactChatroom/client-side/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/khalix/Documents/ReactChatroom/client-side/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import queryString from'query-string';import io from'socket.io-client';import Infobar from'./InfoBar.js';import Input from'./Input.js';import Messages from'./Messages.js';import'../css/Chat.css';var socket;var Chat=function Chat(_ref){var location=_ref.location;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),room=_useState4[0],setRoom=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),messages=_useState8[0],setMessages=_useState8[1];var SERVER='https://react-chatroom-server.herokuapp.com/';useEffect(function(){var _queryString$parse=queryString.parse(location.search),name=_queryString$parse.name,room=_queryString$parse.room;socket=io(SERVER);setName(name);setRoom(room);socket.emit('join',{name:name,room:room},function(){});return function(){socket.emit('disconnect');socket.off();};},[SERVER,location.search]);useEffect(function(){socket.on('message',function(message){setMessages([].concat(_toConsumableArray(messages),[message]));});},[messages]);var sendMessage=function sendMessage(event){event.preventDefault();if(message){socket.emit('sendMessage',message,function(){return setMessage('');});}};return/*#__PURE__*/React.createElement(\"div\",{className:\"outerContainer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(Infobar,{room:room}),/*#__PURE__*/React.createElement(Messages,{messages:messages,name:name}),/*#__PURE__*/React.createElement(Input,{message:message,setMessage:setMessage,sendMessage:sendMessage})));};export default Chat;","map":{"version":3,"sources":["/home/khalix/Documents/ReactChatroom/client-side/src/components/Chat.js"],"names":["React","useState","useEffect","queryString","io","Infobar","Input","Messages","socket","Chat","location","name","setName","room","setRoom","message","setMessage","messages","setMessages","SERVER","parse","search","emit","off","on","sendMessage","event","preventDefault"],"mappings":"sVAAA,MAAOA,CAAAA,KAAP,EAAiBC,QAAjB,CAA2BC,SAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,CACA,MAAOC,CAAAA,EAAP,KAAe,kBAAf,CAEA,MAAOC,CAAAA,OAAP,KAAoB,cAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,YAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,eAArB,CAEA,MAAO,iBAAP,CAEA,GAAIC,CAAAA,MAAJ,CAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,MAAgB,IAAdC,CAAAA,QAAc,MAAdA,QAAc,eACJT,QAAQ,CAAC,EAAD,CADJ,wCACrBU,IADqB,eACfC,OADe,8BAEJX,QAAQ,CAAC,EAAD,CAFJ,yCAErBY,IAFqB,eAEfC,OAFe,8BAGEb,QAAQ,CAAC,EAAD,CAHV,yCAGrBc,OAHqB,eAGZC,UAHY,8BAIIf,QAAQ,CAAC,EAAD,CAJZ,yCAIrBgB,QAJqB,eAIXC,WAJW,eAK5B,GAAMC,CAAAA,MAAM,CAAG,8CAAf,CACAjB,SAAS,CAAE,UAAM,wBACOC,WAAW,CAACiB,KAAZ,CAAkBV,QAAQ,CAACW,MAA3B,CADP,CACRV,IADQ,oBACRA,IADQ,CACFE,IADE,oBACFA,IADE,CAGhBL,MAAM,CAACJ,EAAE,CAACe,MAAD,CAAT,CAEAP,OAAO,CAACD,IAAD,CAAP,CACAG,OAAO,CAACD,IAAD,CAAP,CACAL,MAAM,CAACc,IAAP,CAAY,MAAZ,CAAmB,CAACX,IAAI,CAACA,IAAN,CAAWE,IAAI,CAACA,IAAhB,CAAnB,CAAyC,UAAM,CAAG,CAAlD,EAEA,MAAO,WAAM,CACZL,MAAM,CAACc,IAAP,CAAY,YAAZ,EACAd,MAAM,CAACe,GAAP,GACA,CAHD,CAIA,CAbQ,CAaP,CAACJ,MAAD,CAAQT,QAAQ,CAACW,MAAjB,CAbO,CAAT,CAeAnB,SAAS,CAAC,UAAM,CACfM,MAAM,CAACgB,EAAP,CAAU,SAAV,CAAoB,SAACT,OAAD,CAAW,CAC9BG,WAAW,8BAAKD,QAAL,GAAcF,OAAd,GAAX,CACA,CAFD,EAGA,CAJQ,CAIN,CAACE,QAAD,CAJM,CAAT,CAMA,GAAMQ,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC9BA,KAAK,CAACC,cAAN,GAEA,GAAGZ,OAAH,CAAY,CACXP,MAAM,CAACc,IAAP,CAAY,aAAZ,CAA2BP,OAA3B,CAAoC,iBAAMC,CAAAA,UAAU,CAAC,EAAD,CAAhB,EAApC,EACA,CACD,CAND,CAUA,mBACC,2BAAK,SAAS,CAAC,gBAAf,eACC,2BAAK,SAAS,CAAC,WAAf,eACC,oBAAC,OAAD,EAAS,IAAI,CAAEH,IAAf,EADD,cAEC,oBAAC,QAAD,EAAU,QAAQ,CAAEI,QAApB,CAA8B,IAAI,CAAEN,IAApC,EAFD,cAGC,oBAAC,KAAD,EAAO,OAAO,CAAEI,OAAhB,CAAyB,UAAU,CAAEC,UAArC,CAAiD,WAAW,CAAES,WAA9D,EAHD,CADD,CADD,CASA,CA9CD,CAgDA,cAAehB,CAAAA,IAAf","sourcesContent":["import React , { useState, useEffect }from 'react';\nimport queryString from 'query-string';\nimport io from 'socket.io-client';\n\nimport Infobar from './InfoBar.js'\nimport Input from './Input.js'\nimport Messages from './Messages.js'\n\nimport '../css/Chat.css'\n\nlet socket;\n\nconst Chat = ({location}) => {\n\tconst [name, setName] = useState('');\n\tconst [room, setRoom] = useState('');\n\tconst [message, setMessage] = useState('');\n\tconst [messages, setMessages] = useState([]);\n\tconst SERVER = 'https://react-chatroom-server.herokuapp.com/'\n\tuseEffect (() => {\n\t\tconst { name, room } = queryString.parse(location.search);\n\n\t\tsocket=io(SERVER);\n\n\t\tsetName(name);\n\t\tsetRoom(room);\n\t\tsocket.emit('join',{name:name,room:room},() => { });\n\n\t\treturn () => {\n\t\t\tsocket.emit('disconnect');\n\t\t\tsocket.off();\n\t\t}\n\t},[SERVER,location.search]);\n\n\tuseEffect(() => {\n\t\tsocket.on('message',(message)=>{\n\t\t\tsetMessages([...messages,message]);\n\t\t});\n\t}, [messages]);\n\n\tconst sendMessage = (event) => {\n\t\tevent.preventDefault();\n\n\t\tif(message) {\n\t\t\tsocket.emit('sendMessage', message, () => setMessage(''));\n\t\t}\n\t}\n\n\n\n\treturn(\n\t\t<div className=\"outerContainer\">\n\t\t\t<div className=\"container\">\n\t\t\t\t<Infobar room={room}/>\n\t\t\t\t<Messages messages={messages} name={name} />\n\t\t\t\t<Input message={message} setMessage={setMessage} sendMessage={sendMessage}/>\n\t\t\t</div>\n\t\t</div>\n\t)\n};\n\nexport default Chat "]},"metadata":{},"sourceType":"module"}